---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit the README.Rmd file -->

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Lab report #3 - instructions

Follow the instructions posted at <https://ds202-at-isu.github.io/labs.html> for the lab assignment. The work is meant to be finished during the lab time, but you have time until Monday evening to polish things.

Include your answers in this document (Rmd file). Make sure that it knits properly (into the md file). Upload both the Rmd and the md file to your repository.

All submissions to the github repo will be automatically uploaded for grading once the due date is passed. Submit a link to your repository on Canvas (only one submission per team) to signal to the instructors that you are done with your submission.

# Lab 3: Avenger's Peril

## As a team

Extract from the data below two data sets in long form `deaths` and `returns`

```{r}
av <- read.csv("https://raw.githubusercontent.com/fivethirtyeight/data/master/avengers/avengers.csv", stringsAsFactors = FALSE)
head(av)
str(av)
```

## Death Mutate

```{r}
library(tidyverse)
deaths <- av %>%
  pivot_longer(
    cols = Death1:Death5,
    names_to = "Time",
    values_to = "Death"
  ) %>%
  mutate(Time = parse_number(Time)) %>%
  filter(Death != "")
head(deaths, 10)
str(deaths)
```

## Returns Mutate

```{r}
library(tidyverse)

returns <- av %>%
  pivot_longer(
    cols = Return1:Return5,
    names_to = "Time",
    values_to = "Return"
  ) %>%
  mutate(Time = parse_number(Time)) %>%
  filter(Return != "")

head(returns)
```

## Average Deaths

```{r}
total_avengers <- nrow(av)
total_deaths <- deaths %>% 
  filter(Death == "YES") %>% 
  nrow()

avg_deaths <- total_deaths / total_avengers
print(avg_deaths)
```

## Individually

### Harrison Voss

#### FiveThirtyEight statement

> Out of 173 listed Avengers, my analysis found that 69 had died at least one time after they joined the team.5 That’s about 40 percent of all people who have ever signed on to the team.

#### Code

```{r}
total_avengers <- nrow(av)

avengers_who_died <- deaths |>
  filter(Death == "YES") |>
  distinct(Name.Alias) |>
  nrow()


print(avengers_who_died)

percent_died <- avengers_who_died / total_avengers

print(percent_died* 100)
```

#### Answer

It seems that the number of people who died was 64, not 69, and that the percentage is 37% not 40%.

This is not a very big discrepancy, but my findings do differ from the claim in the analysis.

### Nhu Phan

#### Claim to check
> Of the nine Avengers we see on screen — Iron Man, Hulk, Captain America, Thor, Hawkeye, Black Widow, Scarlet Witch, Quicksilver and The Vision — every single one of them has died at least once in the course of their time Avenging in the comics. In fact, Hawkeye died twice!

```{r}
library(tidyverse)

# Define the nine MCU Avengers mentioned in the article
mcu_avengers <- c(
  "Anthony Edward \"Tony\" Stark",   # Iron Man
  "Robert Bruce Banner",            # Hulk
  "Steven Rogers",                  # Captain America
  "Thor Odinson",                   # Thor
  "Clinton Francis Barton",                   # Hawkeye
  "Natalia Alianovna Romanova", # Black Widow
  "Wanda Maximoff",                 # Scarlet Witch
  "Pietro Maximoff",                # Quicksilver
  "Victor Shade (alias)"                          # Vision
)

mcu_deaths <- deaths %>%
  filter(Name.Alias %in% mcu_avengers & Death == "YES") %>%
  count(Name.Alias, name = "Times_Died") %>%
  arrange(desc(Times_Died))

mcu_deaths
```

#### Conclusion
Based on the data, every one of the nine MCU Avengers has died at least once in the comics, confirming the main claim from the article. However, the statement that only Hawkeye died twice is inaccurate. The dataset shows that several Avengers — including Iron Man, Black Widow, Hulk, Captain America, Vision, and others — have died more than once. Hawkeye does have the highest number of deaths (four), but he is not the only Avenger to experience multiple deaths. Therefore, while the overall idea that the Avengers frequently die and return is true, the specific detail about Hawkeye being unique in this regard is not supported by the data.
